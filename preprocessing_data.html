<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <title>Data Preprocessing</title>
    <link rel="stylesheet" href="assets/css/main.css">
    <noscript><link rel="stylesheet" href="assets/css/noscript.css"></noscript>
</head>
<body class="is-preload">
    <!-- Wrapper -->
    <div id="wrapper">

        <!-- Header -->
        <header id="header">
            <div class="inner">
                <!-- Logo -->
                <a href="index.html" class="logo">
                    <span class="symbol"><img src="images/NeuroNestLogo.png" alt="NeuroNest Logo"></span><span class="title">NeuroNest</span>
                </a>

                <!-- Nav -->
                <nav>
                    <ul>
                        <li><a href="#menu">Menu</a></li>
                    </ul>
                </nav>
            </div>
        </header>

        <!-- Menu -->
        <nav id="menu">
            <h2>Menu</h2>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="resource_menu.html">Resources</a></li>
                <li><a href="https://sopkoc.wixsite.com/neuronest/forum">Ask a Question</a></li>
                <li><a href="https://sopkoc.wixsite.com/neuronest/about">About NeuroNest</a></li>
                <li><a href="https://sopkoc.wixsite.com/neuronest/contact">Contact</a></li>
            </ul>
        </nav>

        <!-- Main -->
        <div id="main">
            <div class="inner">
                <h1>Data Preprocessing</h1>
                <span class="image main"><img src="images/Preprocess_banner.png" alt=""></span>
                <p>Welcome to the NeuroNest tutorial on Data Preprocessing for Neuroimaging Data!</p>

                <h2>Tutorial Time: 40 min</h2>
                <p>In this tutorial, we'll cover several fundamental concepts essential for cleaning and preparing neuroimaging data for analysis. We will focus on MRI data, highlighting techniques, tools, and steps necessary to ensure high-quality data ready for in-depth analysis.</p>

                <h2>Steps in Data Preprocessing:</h2>

                <h3>1. Introduction to Data Preprocessing</h3>
                <p><strong>Importance:</strong> Understanding the need for cleaning and preparing neuroimaging data to ensure accurate and reliable analysis.</p>
                <p><strong>General Steps:</strong> Overview of typical preprocessing steps, including data cleaning, normalization, and transformation.</p>

                <h3>2. Techniques for Cleaning and Preparing Neuroimaging Data:</h3>
                <img src="images/preprocessing_flow.png" alt="Preprocessing Flow" style="width:100%; max-width:800px; margin-bottom:20px;">

                <p>Neuroimaging data preprocessing involves several critical steps to ensure that the data is clean, accurate, and ready for analysis. Below are the key techniques involved in this process:</p>

                <ul>
                    <li><strong>Distortion Correction:</strong> This step corrects distortions in the images caused by inhomogeneities in the magnetic field, ensuring accurate geometric representation of brain structures.</li>
                    <li><strong>Motion Correction:</strong> Realigns images to correct for subject movement, reducing artifacts caused by head motion.</li>
                    <li><strong>Slice Timing Correction:</strong> Aligns the timing of brain slices captured at different times during an fMRI scan.</li>
                    <li><strong>Coregistration:</strong> Aligns functional images to anatomical images for precise localization of brain activity.</li>
                    <li><strong>Spatial Normalization:</strong> Aligns brain images to a common template (e.g., MNI) for group analysis.</li>
                    <li><strong>Smoothing:</strong> Applies a Gaussian filter to enhance signal-to-noise ratio and detect consistent brain activity patterns.</li>
                    <li><strong>Artifact Removal:</strong> Identifies and removes noise sources, such as scanner noise or physiological artifacts, for cleaner data.</li>
                </ul>

                <h3>3. Using FMRIPREP:</h3>
                <p><strong>Overview:</strong> FMRIPREP is a comprehensive and reproducible preprocessing pipeline specifically designed for functional MRI (fMRI) data. It integrates tools such as FSL, ANTs, and FreeSurfer to automate preprocessing steps and provide standardized outputs. FMRIPREP is designed to minimize manual intervention and produce high-quality, reproducible results suitable for further analysis.</p>

                <p><strong>Key Features:</strong></p>
                <ul>
                    <li>Automated preprocessing with minimal manual intervention.</li>
                    <li>Standardized outputs consistent across datasets and studies.</li>
                    <li>Extensive reporting, including detailed visual and textual summaries of preprocessing steps.</li>
                    <li>Integration with other BIDS-compatible tools and pipelines.</li>
                </ul>

                <p><strong>Steps in FMRIPREP Pipeline:</strong> The FMRIPREP pipeline includes various steps such as motion correction, spatial normalization, segmentation, smoothing, and artifact removal. These steps are integrated into a single, streamlined process that prepares fMRI data for analysis by correcting for movement, aligning images to standard templates, and removing noise and artifacts.</p>

                <p><strong>Advantages and Disadvantages:</strong></p>
                <ul>
                    <li><strong>Advantages:</strong></li>
                    <ul>
                        <li>High reproducibility due to standardized procedures.</li>
                        <li>Automated processes reduce manual intervention and human error.</li>
                        <li>Comprehensive reporting enhances transparency and quality control.</li>
                    </ul>
                    <li><strong>Disadvantages:</strong></li>
                    <ul>
                        <li>Resource-intensive, requiring significant computational power.</li>
                        <li>Complexity may present a learning curve for new users.</li>
                    </ul>
                </ul>

                <p><strong>Example FMRIPREP Command:</strong></p>
                <pre><code># Basic command to run FMRIPREP on a BIDS-compliant dataset
fmriprep /path/to/bids_dataset /path/to/output participant \
--participant-label 01 \
--output-spaces MNI152NLin2009cAsym:res-2 anat \
--use-syn-sdc --fs-no-reconall \
--nthreads 8 --mem-mb 16000 \
--resource-monitor \
--write-graph --stop-on-first-crash
</code></pre>

                <p>In this command:</p>
                <ul>
                    <li><strong>/path/to/bids_dataset:</strong> The directory containing your BIDS-formatted dataset.</li>
                    <li><strong>/path/to/output:</strong> The directory where FMRIPREP will store the outputs.</li>
                    <li><strong>--participant-label:</strong> Specifies which participant's data to process.</li>
                    <li><strong>--output-spaces:</strong> Specifies the spaces to which the data should be normalized (e.g., MNI152NLin2009cAsym).</li>
                    <li><strong>--use-syn-sdc:</strong> Applies susceptibility distortion correction using the SyN algorithm.</li>
                    <li><strong>--nthreads:</strong> Number of threads to use.</li>
                    <li><strong>--mem-mb:</strong> Memory allocation in MB.</li>
                    <li><strong>--resource-monitor:</strong> Enables resource monitoring.</li>
                    <li><strong>--write-graph:</strong> Generates a visual graph of the workflow.</li>
                    <li><strong>--stop-on-first-crash:</strong> Stops the process if an error is encountered.</li>
                </ul>

                <h3>4. Quality Assessment with MRIQC:</h3>
                <p><strong>Overview:</strong> MRIQC (Magnetic Resonance Imaging Quality Control) is a tool designed to assess the quality of MRI data. It computes a wide range of quality metrics, such as signal-to-noise ratio (SNR) and contrast-to-noise ratio (CNR), and generates visual reports that help in identifying potential issues with the data. MRIQC is an essential step before preprocessing, ensuring that only high-quality data is processed further.</p>

                <p><strong>Key Features:</strong></p>
                <ul>
                    <li>Comprehensive quality assessment with various metrics that evaluate the overall quality of MRI scans.</li>
                    <li>Automated generation of easy-to-interpret reports that provide a visual and statistical summary of data quality.</li>
                    <li>Compatibility with BIDS datasets, facilitating seamless integration with other neuroimaging tools and pipelines.</li>
                </ul>

                <p><strong>Steps in MRIQC Pipeline:</strong></p>
                <ul>
                    <li><strong>Image Assessment:</strong> MRIQC evaluates individual MRI images to identify any issues such as artifacts, noise, or motion.</li>
                    <li><strong>Quality Metrics Calculation:</strong> MRIQC calculates various metrics, including SNR, CNR, and measures of spatial artifacts, providing a quantitative assessment of data quality.</li>
                    <li><strong>Reporting:</strong> MRIQC generates comprehensive visual reports that summarize the quality metrics for each scan, making it easier to identify and exclude poor-quality data.</li>
                </ul>

                <p><strong>Example MRIQC Command:</strong></p>
                <pre><code># Basic command to run MRIQC on a BIDS-compliant dataset
mriqc /path/to/bids_dataset /path/to/output participant \
--participant-label 01 \
--n_procs 8 \
--mem_gb 16 \
--fd_thres 0.2 \
--ica
</code></pre>

                <p>In this command:</p>
                <ul>
                    <li><strong>/path/to/bids_dataset:</strong> The directory containing your BIDS-formatted dataset.</li>
                    <li><strong>/path/to/output:</strong> The directory where MRIQC will store the outputs.</li>
                    <li><strong>--participant-label:</strong> Specifies which participant's data to process.</li>
                    <li><strong>--n_procs:</strong> Number of processors to use.</li>
                    <li><strong>--mem_gb:</strong> Memory allocation in GB.</li>
                    <li><strong>--fd_thres:</strong> Framewise displacement threshold for identifying motion artifacts.</li>
                    <li><strong>--ica:</strong> Use Independent Component Analysis (ICA) to decompose the data and identify sources of noise.</li>
                </ul>

                <h3>5. Comparison of FMRIPREP and MRIQC:</h3>

                <p><strong>Purpose:</strong></p>
                <ul>
                    <li><strong>FMRIPREP:</strong> Primarily focuses on preprocessing functional MRI data, preparing it for analysis by correcting for motion, normalizing to standard templates, segmenting tissues, and removing artifacts.</li>
                    <li><strong>MRIQC:</strong> Concentrates on assessing the quality of MRI data before preprocessing begins, ensuring that only high-quality scans proceed to the analysis stage. It provides quantitative metrics and visual reports that help in evaluating the integrity of the data.</li>
                </ul>

                <p><strong>Functionality:</strong></p>
                <ul>
                    <li><strong>FMRIPREP:</strong> Includes multiple preprocessing steps such as motion correction, spatial normalization, segmentation, smoothing, and artifact removal. It outputs data that is ready for further analysis.</li>
                    <li><strong>MRIQC:</strong> Computes quality metrics and generates reports but does not perform preprocessing itself. It serves as a crucial quality control step before running tools like FMRIPREP.</li>
                </ul>

                <p><strong>Use Case:</strong></p>
                <ul>
                    <li><strong>FMRIPREP:</strong> Ideal for researchers who need a comprehensive, automated preprocessing solution that prepares functional MRI data for subsequent analysis.</li>
                    <li><strong>MRIQC:</strong> Best suited for researchers who need to assess and ensure the quality of their MRI data before processing it with tools like FMRIPREP.</li>
                </ul>

                <p><strong>Integration:</strong></p>
                <ul>
                    <li><strong>MRIQC and FMRIPREP Complementarity:</strong> MRIQC can be used before FMRIPREP to evaluate the quality of the data. By identifying and excluding poor-quality scans, researchers can ensure that only high-quality data is processed by FMRIPREP. After FMRIPREP, MRIQC can also be used to assess the effectiveness of the preprocessing steps.</li>
                </ul>

                <h3>Interactive Tutorial</h3>
                <p>For an in-depth, step-by-step guide on preprocessing neuroimaging data, check out our <a href="Prep_tutorial.html">Interactive Tutorial</a>.</p>

                <h2>Resources:</h2>
                <ul>
                    <li><a href="https://andysbrainbook.readthedocs.io/en/latest/OpenScience/OS/fMRIPrep_Demo.html">Andy's Brain Book on fMRIPrep</a></li>
                    <li><a href="https://rpubs.com/sarenseeley/bids-fmriprep-mriqc">BIDS fMRIPrep and MRIQC</a></li>
                </ul>

                <h2>References:</h2>
                <ul>
                    <li>Provins, C., MacNicol, E., Seeley, S. H., Hagmann, P., & Esteban, O. (2023). Quality control in functional MRI studies with MRIQC and fMRIPrep. Frontiers in neuroimaging, 1, 1073734. <a href="https://doi.org/10.3389/fnimg.2022.1073734">Link</a></li>
                    <li>Nárai, Á., Hermann, P., Auer, T., Kemenczky, P., Szalma, J., Homolya, I., Somogyi, E., Vakli, P., Weiss, B., & Vidnyánszky, Z. (2022). Movement-related artefacts (MR-ART) dataset of matched motion-corrupted and clean structural MRI brain scans. Scientific data, 9(1), 630. <a href="https://doi.org/10.1038/s41597-022-01694-8">Link</a></li>
                    <li>Esteban, O., Birman, D., Schaer, M., Koyejo, O. O., Poldrack, R. A., & Gorgolewski, K. J. (2017). MRIQC: Advancing the automatic prediction of image quality in MRI from unseen sites. PloS one, 12(9), e0184661. <a href="https://doi.org/10.1371/journal.pone.0184661">Link</a></li>
                </ul>

                <p>By following this tutorial, you will gain essential skills and knowledge to preprocess neuroimaging data effectively, ensuring high-quality and reliable results for your research. Happy learning!</p>
            </div>
        </div>

        <!-- Footer -->
        <footer id="footer">
            <div class="inner">
                <section>
                    <h2>Funding</h2>
                    <p> We would like to express our heartfelt gratitude to <strong>Neurohackademy</strong> at the <strong>University of Washington eScience Institute</strong> for providing invaluable training and support. This experience has significantly enriched our understanding of neuroimaging and data science. We also acknowledge the support of the National Institute of Mental Health (NIMH) grant number <strong>5R25MH112480-08</strong>, which made this opportunity possible.</p>
                </section>
                <section>
                    <h2>Follow</h2>
                    <ul class="icons">
                        <li><a href="https://x.com/Neuro_Nest" class="icon brands style2 fa-twitter"><span class="label">Twitter</span></a></li>
                        <li><a href="https://github.com/NeuroHackademy2024/NeuroNest" class="icon brands style2 fa-github"><span class="label">GitHub</span></a></li>
                        <li><a href="mailto:sopkoc@umich.edu" class="icon solid style2 fa-envelope"><span class="label">Email</span></a></li>
                    </ul>
                </section>
                <ul class="copyright">
                    <li>&copy; NeuroNest. All rights reserved</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
                </ul>
            </div>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>

</body>
</html>

